<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>COMS Flowsheet</title>
	<meta name="author" content="Mike Barlow">
	<!-- CSS : ExtJS 4.0 Framework      -->
	<link rel="stylesheet" type="text/css" href="/libs/ExtJS_4.1RC1/resources/css/ext-all.css">
	<link rel="stylesheet" type="text/css" href="js/UAT_18June2012/COMS.css">
	<style>
	#Loader {
		position: absolute; 
		left: 20%; 
		margin: 20%; 
		font-size: 24px; 
		font-family: tahoma,arial,verdana,sans-serif;
	}
	</style>


	<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
    <section id="Loader">Loading Application</section>
	<section id="application" class="container initialHide">
        <header id="Header" class="application">
            <h1 id="title">COMS - Flowsheet</h1>
        </header>

        <section id="MainContent"></section>
	</section>    <!-- end of #Application -->

	<footer id="footer">
	</footer>

    <script type="text/javascript" src="/libs/ExtJS_4.1RC1/ext-all-debug.js"></script>
	<script type="text/javascript" src="/libs/boomerang.js"></script>
    <script type="text/javascript" src="../LocalizedCode.js"> </script>
	<script type="text/javascript" src="../FlowsheetApp.js"></script>

	<script>
	    var UseNewQueryMethod = true;
	    var MDWSTypeMsg = "MDWS Match Query in use";
	    var SQLTypeMsg = "SQL Query in use";

	    function switchQueryMethod() {
			var MDWS = "MDWS/Match Query Method";
			var SQL = "Internal SQL Query Method";
			var msg, nextMthd, msg2Use;
			if (UseNewQueryMethod) {
				msg = MDWS;
				nextMthd = "Press \"OK\" to switch to the " + SQL;
			}
			else {
				msg = SQL;
				nextMthd = "Press \"OK\" to switch to the " + MDWS;
			}

			var temp = confirm("Currently using " + msg + ". \n" + nextMthd + "\nOr cancel to keep using the " + msg);
			if (temp) {
				if (UseNewQueryMethod) {
					UseNewQueryMethod = false;
					msg2Use = SQLTypeMsg;
				}
				else {
					UseNewQueryMethod = true;
					msg2Use = MDWSTypeMsg;
				}

				var el = document.getElementById("QueryType");
				if (el) {
					el.innerHTML = msg2Use;
				}
			}
		}

		var LogoutCancelled = true;
		function logoutConfirmed(btn) {
			if ("yes" === btn) {
				LogoutCancelled = false;
				document.location.href="/logout.php";
			}
			else {
				LogoutCancelled = true;
			}
		}
		function logoutPrompt(e) {
			Ext.MessageBox.confirm('Confirm', 'Are you sure you want to logout?', logoutConfirmed);
		}

		window.onbeforeunload = function(e) { // see: http://jsfiddle.net/zalun/yFuPr/
			if (LogoutCancelled) {
				e = e || window.event;
				e.preventDefault = false;
				e.cancelBubble = false;
				e.returnValue = '';
			}
		}
	</script>

</body>
</html>