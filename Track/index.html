<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
		<title>User Tracking for Chemotherapy Order Management System (COMS)</title>

		<!-- CSS : ExtJS 4.0 Framework      -->
		<link rel="stylesheet" type="text/css" href="/libs/ExtJS_4.1RC1/resources/css/ext-all.css">

		<!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
		<script src="/libs/modernizr-2.0.6.js"></script>
		<style>
			div#heading { margin: 1em; display:none; font-size: 110%; }
			#heading ul { margin: 1em; }
			#heading li { margin-left: 3em; list-style-type: disc; }
		</style>

	</head>
<body>
<div id="heading">
</div>

<div id="GridPanel"></div>
 <script type="text/javascript" src="/libs/ExtJS_4.1RC1/ext-all-debug.js"></script>

<script>
Ext.onReady(function(){
	var heading = Ext.get("heading");
	heading.dom.style.display="block";
	var minWidth = Ext.getBody().getViewSize().width - 150;
	var minHeight = Ext.getBody().getViewSize().height - 200;
	if (minWidth < 0) {
		minWidth = 200;
	}
	if (minHeight < 0) {
		minHeight = 200;
	}
	var puWin = function(title, msg) {
		var bodyWin = Ext.create("Ext.window.Window", { 
			title: title,
			layout: "fit",
			html: msg,
			minWidth: minWidth,
			minHeight: minHeight,
			autoScroll: true,
			bodyPadding: '10',
			modal: true
		});
		bodyWin.show();
	}
	
	Ext.define('Track', {
		extend: 'Ext.data.Model',
		fields: [
			"winauth", "point", "pointno", "time", "date2"
		]
	});

	var store = Ext.create('Ext.data.Store', {
		autoLoad: true,
		model: "Track",
		groupField: "label",
		proxy: {
			type: "rest",
			url: "/showTrackData.php",
			reader: {
				type: "json",
				root: "records"
			}
		}
	});

	var grid = Ext.create('Ext.grid.Panel', {
		selType: 'rowmodel',
		title: 'User Tracking',
		store: store,
		margin: '25',
		frame: true,
		layout: "fit",
		columns: [
				{ text: 'User Name', dataIndex: 'winauth', width:220, autoSizeColumn: true},
			// { text: 'Point', dataIndex: 'point'},
			// { text: 'Point #', dataIndex: 'pointno'},
				{ text: 'Date', dataIndex: 'date2'},
				{ text: 'Time', dataIndex: 'time'}

		],
		renderTo: Ext.get("GridPanel")
	});

	Ext.EventManager.onWindowResize(function () {
		var tmpWidth = Ext.getBody().getViewSize().width - 50;
		var tmpHeight = Ext.getBody().getViewSize().height - 160;
		grid.setSize(tmpWidth, tmpHeight);
	});

	var tmpWidth = Ext.getBody().getViewSize().width - 50;
	var tmpHeight = Ext.getBody().getViewSize().height - 160;
	grid.setSize(tmpWidth, tmpHeight);

});
</script>
</body>
</html>